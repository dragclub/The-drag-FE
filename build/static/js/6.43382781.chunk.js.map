{"version":3,"sources":["Pages/Promotions/Promotions.jsx"],"names":["dotenv","config","CreatorCard","React","lazy","Popup","Filter","DealCreate","Promotions","data","setData","useState","search","setSearch","currentPage","setCurrentPage","totalPages","setTotalPages","isLoading","setIsloading","isBlurred","setIsBlurred","filter","setFilter","selectedFilter","setSelectedFilter","debouncedFetchData","useCallback","debounce","async","searchTerm","page","filterdata","response","fetchSearchAndFilterData","error","console","loadUserData","arguments","length","undefined","result","fetchUserData","useEffect","fetchDataWithFilter","filteredData","log","platform","_jsxs","className","children","_jsx","contentStyle","marginBottom","trigger","modal","closeOnDocumentClick","onOpen","onClose","close","onSubmit","e","preventDefault","htmlFor","FiSearch","type","name","id","placeholder","value","onChange","target","onClick","helper","loading","_Fragment","map","item","idx","approved","_item$socialMedia$fac","creatorObj","userName","email","image","linkedinurl","socialMedia","linkedin","url","linkedincount","count","instaurl","insta","instacount","twitterurl","twitter","twittercount","facebookurl","facebook","facebookcount","youtubeurl","youtube","youtubecount","props","style","color","fontSize","textAlign","disabled","handlePrevPage","window","scrollTo","top","left","behavior","handleNextPage"],"mappings":"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","file":"static/js/6.43382781.chunk.js","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\r\nimport \"./Promotions.css\";\r\nimport { FiSearch } from \"react-icons/fi\";\r\nimport dotenv from \"dotenv\";\r\nimport { fetchSearchAndFilterData, fetchUserData } from \"../../api/data\";\r\nimport { debounce } from \"lodash\";\r\n\r\ndotenv.config();\r\n\r\nconst CreatorCard = React.lazy(() =>\r\n  import(\"../../components/CreatorCard/CreatorCard\")\r\n);\r\nconst Popup = React.lazy(() => import(\"reactjs-popup\"));\r\nconst Filter = React.lazy(() => import(\"../../components/Filter/Filter\"));\r\nconst DealCreate = React.lazy(() =>\r\n  import(\"../../components/DealCreate/DealCreate\")\r\n);\r\n\r\ndotenv.config();\r\n\r\nconst Promotions = () => {\r\n  const [data, setData] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [isLoading, setIsloading] = useState(false);\r\n  const [isBlurred, setIsBlurred] = useState(false);\r\n  const [filter, setFilter] = useState(null);\r\n  const [selectedFilter,setSelectedFilter] = useState(\"all\")\r\n  // Debounce the fetch function to prevent excessive API calls\r\n  const debouncedFetchData = useCallback(\r\n    debounce(async (searchTerm, page, filterdata) => {\r\n      setIsloading(true);\r\n\r\n      try {\r\n        const response = await fetchSearchAndFilterData({\r\n          searchTerm,\r\n          page,\r\n          filterdata,\r\n        });\r\n\r\n        if (response && response.data) {\r\n          setData(response.data);\r\n          setTotalPages(response.totalPages || 1);\r\n        } else {\r\n          setData([]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n      } finally {\r\n        setIsloading(false);\r\n      }\r\n    }, 500),\r\n    []\r\n  );\r\n\r\n  const handleSearchChange = (e) => {\r\n    const value = e.target.value;\r\n    setSearch(value);\r\n    debouncedFetchData(value, 1, filter);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const loadUserData = async (page = 1) => {\r\n    setIsloading(true);\r\n    try {\r\n      const result = await fetchUserData(page);\r\n      if (result) {\r\n        setData(result.data);\r\n        setTotalPages(result.totalPages);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching user data:\", error);\r\n    } finally {\r\n      setIsloading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsloading(true);\r\n    loadUserData(currentPage);\r\n  }, []);\r\n\r\n  // Handle filter data\r\n  const fetchDataWithFilter = (filteredData) => {\r\n    setFilter(filteredData);\r\n    console.log(\"filteredData\",filteredData);\r\n    setSelectedFilter(filteredData.platform);\r\n    debouncedFetchData(search, 1, filteredData);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleNextPage = () => {\r\n    if (currentPage < totalPages) {\r\n      \r\n      search === \"\"\r\n        ? loadUserData(currentPage + 1)\r\n        : debouncedFetchData(search, currentPage + 1, filter);\r\n    }\r\n    setCurrentPage(currentPage + 1);\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 0,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  const handlePrevPage = () => {\r\n    if (currentPage > 1) setCurrentPage(currentPage - 1);\r\n    \r\n    search === \"\"\r\n      ? loadUserData(currentPage - 1)\r\n      : debouncedFetchData(search, currentPage - 1, filter);\r\n\r\n    window.scrollTo({\r\n      top: 0,\r\n      left: 0,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`promotions-container ${isBlurred ? \"blur-background\" : \"\"} `}\r\n    >\r\n      <div className=\"header\">\r\n        <div className=\"h-deal\">\r\n          <h2>Creators</h2>\r\n          <Popup\r\n            contentStyle={{ marginBottom: \"5vh\" }}\r\n            trigger={\r\n              <div className=\"deal font-black\">\r\n                <p>Post a Deal</p>\r\n              </div>\r\n            }\r\n            modal\r\n            closeOnDocumentClick={false}\r\n            onOpen={() => setIsBlurred(true)}\r\n            onClose={() => setIsBlurred(false)}\r\n          >\r\n            {(close) => <DealCreate close={close} />}\r\n          </Popup>\r\n        </div>\r\n\r\n        <div className=\"searchfilter\">\r\n          <div className=\"search\">\r\n            <form onSubmit={(e) => e.preventDefault()}>\r\n              <label htmlFor=\"search\" className=\"field\">\r\n                <FiSearch className=\"search-icon\" />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"search\"\r\n                  id=\"search\"\r\n                  placeholder=\"Search Creators\"\r\n                  value={search}\r\n                  onChange={handleSearchChange}\r\n                />\r\n              </label>\r\n            </form>\r\n          </div>\r\n          <div className=\"all-filter\">\r\n            <div\r\n              className=\"all\"\r\n              onClick={() => {\r\n                loadUserData(1);\r\n                setCurrentPage(1);\r\n                setFilter(null);\r\n                setSearch(\"\");\r\n              }}\r\n            >\r\n              <p>ALL</p>\r\n            </div>\r\n            <Popup\r\n              trigger={\r\n                <div className=\"filter\">\r\n                  <p>Filter</p>\r\n                </div>\r\n              }\r\n              modal\r\n              onOpen={() => setIsBlurred(true)}\r\n              onClose={() => setIsBlurred(false)}\r\n            >\r\n              {(close) => (\r\n                <Filter\r\n                  helper={fetchDataWithFilter}\r\n                  loading={setIsloading}\r\n                  close={close}\r\n                  setSelectedFilter={setSelectedFilter}\r\n                />\r\n              )}\r\n            </Popup>\r\n            <Popup\r\n              contentStyle={{ marginBottom: \"5vh\" }}\r\n              trigger={\r\n                <div className=\"deal-h\">\r\n                  <p>Post Deal</p>\r\n                </div>\r\n              }\r\n              modal\r\n              closeOnDocumentClick={false}\r\n              onOpen={() => setIsBlurred(true)}\r\n              onClose={() => setIsBlurred(false)}\r\n            >\r\n              {(close) => <DealCreate close={close} />}\r\n            </Popup>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"creators\">\r\n        {isLoading ? (\r\n          <div className=\"loading\">\r\n            <div className=\"loader\"></div>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"creator-list\">\r\n              {data && data.length > 0 ? (\r\n                data.map((item, idx) => {\r\n                  if (item.approved === \"true\") {\r\n                    const creatorObj = {\r\n                      name: item.userName,\r\n                      email: item.email,\r\n                      image: item.image,\r\n                      linkedinurl: item.socialMedia.linkedin.url,\r\n                      linkedincount: item.socialMedia.linkedin.count,\r\n                      instaurl: item.socialMedia.insta.url,\r\n                      instacount: item.socialMedia.insta.count,\r\n                      twitterurl: item.socialMedia.twitter.url,\r\n                      twittercount: item.socialMedia.twitter.count,\r\n                      facebookurl: item.socialMedia.facebook.url,\r\n                      facebookcount: item.socialMedia.facebook?.count,\r\n                      youtubeurl: item.socialMedia.youtube.url,\r\n                      youtubecount: item.socialMedia.youtube.count,\r\n                    };\r\n                    return (\r\n                      <CreatorCard\r\n                        key={`${item.id}.${idx}`}\r\n                        props={creatorObj}\r\n                        selectedFilter={selectedFilter}\r\n                        setIsBlurred={setIsBlurred}\r\n                      />\r\n                    );\r\n                  } else {\r\n                    return null;\r\n                  }\r\n                })\r\n              ) : (\r\n                <p\r\n                  style={{\r\n                    color: \"white\",\r\n                    fontSize: \"24px\",\r\n                    textAlign: \"center\",\r\n                  }}\r\n                >\r\n                  No Creator Found\r\n                </p>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        <div className=\"pagination\">\r\n          <div className=\"buttons\">\r\n            <button\r\n              disabled={currentPage === 1}\r\n              onClick={handlePrevPage}\r\n              className=\"pagination-button\"\r\n            >\r\n              Previous\r\n            </button>\r\n\r\n            <button\r\n              disabled={currentPage === totalPages}\r\n              onClick={handleNextPage}\r\n              className=\"pagination-button\"\r\n            >\r\n              Next\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"total\">{`Page ${currentPage} of ${totalPages}`}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Promotions;\r\n"],"sourceRoot":""}